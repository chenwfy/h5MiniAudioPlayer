!function (t) { "use strict"; var e = function () { this.config = arguments[0] || {}, this.mode = this.config.mode || "loop", this.volume = this.config.volume || 80, this.mute = this.config.mute || !1; var t = this, e = ["loop", "list", "single", "sLoop", "random"], n = [], r = null, i = 0, o = null, u = function () { o = new Audio, o.autoplay = !1, o.controls = !1, o.muted = t.mute, o.volume = t.volume / 100, o.pause(), o.addEventListener("ended", function () { d() }, !1) }, s = function (t) { if (t > 0) { var e = parseInt(t / 60, 10), n = t % 60; return (9 >= e ? "0" + e : e) + ":" + (9 >= n ? "0" + n : n) } return "00:00" }, a = function (t) { return (t || "").replace(/^(\s|\u00A0)+|(\s|\u00A0)+$/g, "") }, f = function (e) { var r = a(e); "" != r && n.indexOf(r) < 0 && (n.push(r), i++), "" == t.getCur() && n.length > 0 && (o.src = n[0]) }, c = function (e) { var r, o = a(e); "" != o && (r = n.indexOf(o), r >= 0 && (n.splice(r, 1), i--, t.getCur().toLowerCase() == o.toLowerCase() && ("single" == t.mode || "sLoop" == t.mode ? t.stop() : d()))) }, d = function () { var e, r, o, u = arguments.length > 0 ? 1 == Number(arguments[0]) : !0; n.length > 0 ? (i = n.length, "sLoop" == t.mode && (t.setPosition(0), t.play()), ("list" == t.mode || "loop" == t.mode) && (e = t.getCur(), r = n.indexOf(e), o = u ? r + 1 : r - 1, "loop" == t.mode && 0 > o && (o = i - 1), "loop" == t.mode && o >= i && (o = 0), o >= 0 && i > o && (t.setCur(n[o]), t.setPosition(0), t.play())), "random" == t.mode && (o = Math.floor(Math.random() * i), t.setCur(n[o]), t.setPosition(0), t.play())) : t.stop() }; u(), this.add = function (t) { var e, n, r = t || ""; if ("string" == typeof r) f(t); else if (r instanceof Array) for (e = 0, n = r.length; n > e; e++) f(r[e]); return this }, this.remove = function (t) { var e, n, r = t || ""; if ("string" == typeof r) c(t); else if (r instanceof Array) for (e = 0, n = r.length; n > e; e++) c(r[e]); return this }, this.getMode = function () { return t.mode }, this.setMode = function (n) { return t.mode != n && e.indexOf(n) >= 0 && (t.mode = n), this }, this.setPosition = function (t) { try { o.currentTime = t || 0 } catch (e) { } return this }, this.getPosition = function () { var t = arguments[0] || !1, e = parseInt(~~o.currentTime || 0, 10); return t ? s(e) : e }, this.getDuration = function () { var t, e = arguments[0] || !1, n = ~~o.duration; return 0 == n && (t = o.buffered.length, t > 0 && (n = ~~o.buffered.end(t--))), n = parseInt(0 == n ? o.currentTime : n, 10), e ? s(n) : n }, this.setVolume = function (e) { return e = ~~e, e >= 0 && 100 >= e && (t.volume = e, o.volume = e / 100), this }, this.getMute = function () { return o.muted }, this.setMute = function (e) { return o.muted != e && (t.mute = e, o.muted = e), this }, this.getCur = function () { return o.currentSrc || "" }, this.setCur = function (e) { return e = a(e), "" != e && t.getCur != e && (f(e), o.src = e), this }, this.play = function () { return o.play(), this }, this.pause = function () { return !o.paused && o.pause(), this }, this.stop = function () { return t.pause(), r && r(), this }, this.prev = function () { t.pause(), d(-1) }, this.next = function () { t.pause(), d(1) }, this.on = function (t, e) { return ["play", "playing", "pause", "ended", "timeupdate", "progress"].indexOf(t) >= 0 ? o.addEventListener(t, function () { e && e() }, !1) : "error" == t ? o.addEventListener("error", function () { var t = o.error.code; 2 == t ? e && e("\u62b1\u6b49\uff0c\u7f51\u7edc\u9519\u8bef\uff01") : 3 == t ? e && e("\u62b1\u6b49\uff0c\u5a92\u4f53\u6587\u4ef6\u683c\u5f0f\u89e3\u7801\u9519\u8bef\uff01") : 4 == t ? e && e("\u62b1\u6b49\uff0c\u4e0d\u652f\u6301\u6307\u5b9a\u7684\u5a92\u4f53\u6587\u4ef6\u683c\u5f0f\uff01") : e && e("\u62b1\u6b49\uff0c\u64ad\u653e\u9519\u8bef\uff01") }, !1) : "stop" == t && (r = e), this } }; t.h5MiniAudioPlayer = e }(window);